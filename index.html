<!DOCTYPE html>
<html lang="ru">
<title></title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, user-scalable=yes">
<body>
<button onclick="showNotification()">Click me</button>
<script>
    function showNotification() {
        new window.Notification('Новое сообщение', {
            icon: 'https://storage.florist.ru/f/get/content/bouquet-list/ae/0d/_db627b3b8f4fcf2b5c67a534a30d/270x270/647d8ecb29688.jpg',
            body: 'Пришло новое сообщение по заказу №38947234874',
            image: 'https://peter-gribanov.github.io/serviceworker/Bubble-Nebula_big.jpg',
        });
    }
    navigator.serviceWorker.register('./sw.js');
    Notification.requestPermission((result) => {
        if (result === 'granted') {
            navigator.serviceWorker.ready.then((registration) => {
                setTimeout(() => {
                    const notification = registration.showNotification('Новое сообщение', {
                        body: 'Пришло новое сообщение по заказу №38947234874',
                        icon: 'https://partner.florist.ru/apple-touch-icon.png',
                        image: 'https://storage.florist.ru/f/get/content/bouquet-list/ae/0d/_db627b3b8f4fcf2b5c67a534a30d/270x270/647d8ecb29688.jpg',
                        vibrate: [200, 100, 200, 100, 500],
                        requireInteraction: true,
                    });

                    notification.onclick = (evt) => {
                        evt.preventDefault();
                        window.open('https://justdealman.github.io/', '_blank');
                    };
                }, 5000);
            });
        }
    });
</script>
</body>
</html>
